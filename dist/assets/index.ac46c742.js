var N=Object.defineProperty,U=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var T=(g,l,r)=>l in g?N(g,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):g[l]=r,E=(g,l)=>{for(var r in l||(l={}))P.call(l,r)&&T(g,r,l[r]);if(z)for(var r of z(l))D.call(l,r)&&T(g,r,l[r]);return g},S=(g,l)=>U(g,j(l));import{h as X,F as B,a as I,v as Y,E as M,b as H}from"./validate.156f0b77.js";import{g as q,L as G}from"./index.5d6809df.js";import{h as J,r as V,o as L,c as F,f as w,a as b,_ as W,L as K,g as _,I as C,w as R,i as Q,A as Z,E as tt}from"./vendor.5c522d5e.js";import"./logo.ec71436e.js";(function(){function g(t){var s=document.getElementById(t.id),n=typeof t=="object"&&t;return new f(s,n)}var l=function(){var t=arguments.length,s=arguments[0]||{},n,i,a;for(typeof s!="object"&&typeof s!="function"&&(s={}),t==1&&(s=this,n--),n=1;n<t;n++){i=arguments[n];for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},r=function(t){return typeof t=="function"&&typeof t.nodeType!="number"},f=function(t,s){this.$element=t,this.options=l({},f.DEFAULTS,s),this.$element.style.position="relative",this.$element.style.width=this.options.width+"px",this.$element.style.margin="0 auto",this.init()},v;f.VERSION="1.0",f.Author="imooc_front@163.com",f.DEFAULTS={width:280,height:155,PI:Math.PI,sliderL:42,sliderR:9,offset:5,loadingText:"\u6B63\u5728\u52A0\u8F7D\u4E2D...",failedText:"\u518D\u8BD5\u4E00\u6B21",barText:"\u5411\u53F3\u6ED1\u52A8\u586B\u5145\u62FC\u56FE",repeatIcon:"iconfont iconfont-shuaxin",maxLoadCount:3,localImages:function(){return"images/Pic"+Math.round(Math.random()*4)+".jpg"},verify:function(t,s){var n=!1;return $.ajax({url:s,data:{datas:JSON.stringify(t)},dataType:"json",type:"post",async:!1,success:function(i){n=JSON.stringify(i),console.log("\u8FD4\u56DE\u7ED3\u679C\uFF1A"+n)}}),n},remoteUrl:""},window.sliderCaptcha=g,window.sliderCaptcha.Constructor=f,v=f.prototype,v.init=function(){this.initDOM(),this.initImg(),this.bindEvents()},v.initDOM=function(){var t=function(x,y){var k=document.createElement(x);return k.className=y,k},s=function(x,y){var k=document.createElement("canvas");return k.width=x,k.height=y,k},n=s(this.options.width-2,this.options.height),i=n.cloneNode(!0),a=t("div","sliderContainer"),u=t("i","refreshIcon "+this.options.repeatIcon),c=t("div","sliderMask"),o=t("div","sliderbg"),e=t("div","slider"),d=t("i","iconfont icon-arrow-right sliderIcon"),h=t("span","sliderText"),m,p;i.className="slider-captcha-block",h.innerHTML=this.options.barText,m=this.$element,m.appendChild(n),m.appendChild(u),m.appendChild(i),e.appendChild(d),c.appendChild(e),a.appendChild(o),a.appendChild(c),a.appendChild(h),m.appendChild(a),p={canvas:n,block:i,sliderContainer:a,refreshIcon:u,slider:e,sliderMask:c,sliderIcon:d,text:h,canvasCtx:n.getContext("2d"),blockCtx:i.getContext("2d")},r(Object.assign)?Object.assign(this,p):l(this,p)},v.initImg=function(){var t=this,s=window.navigator.userAgent.indexOf("Trident")>-1,n=this.options.sliderL+this.options.sliderR*2+3,i=function(o,e){var d=t.options.sliderL,h=t.options.sliderR,m=t.options.PI,p=t.x,x=t.y;o.beginPath(),o.moveTo(p,x),o.arc(p+d/2,x-h+2,h,.72*m,2.26*m),o.lineTo(p+d,x),o.arc(p+d+h-2,x+d/2,h,1.21*m,2.78*m),o.lineTo(p+d,x+d),o.lineTo(p,x+d),o.arc(p+h-2,x+d/2,h+.4,2.76*m,1.24*m,!0),o.lineTo(p,x),o.lineWidth=2,o.fillStyle="rgba(255, 255, 255, 0.7)",o.strokeStyle="rgba(255, 255, 255, 0.7)",o.stroke(),o[e](),o.globalCompositeOperation=s?"xor":"destination-over"},a=function(o,e){return Math.round(Math.random()*(e-o)+o)},u=new Image,c;u.crossOrigin="Anonymous",c=0,u.onload=function(){t.x=a(n+10,t.options.width-(n+10)),t.y=a(10+t.options.sliderR*2,t.options.height-(n+10)),i(t.canvasCtx,"fill"),i(t.blockCtx,"clip"),t.canvasCtx.drawImage(u,0,0,t.options.width-2,t.options.height),t.blockCtx.drawImage(u,0,0,t.options.width-2,t.options.height);var o=t.y-t.options.sliderR*2-1,e=t.blockCtx.getImageData(t.x-3,o,n,n);t.block.width=n,t.blockCtx.putImageData(e,0,o+1),t.text.textContent=t.text.getAttribute("data-text")},u.onerror=function(){if(c++,window.location.protocol==="file:"&&(c=t.options.maxLoadCount,console.error("can't load pic resource file from File protocal. Please try http or https")),c>=t.options.maxLoadCount){t.text.textContent="\u52A0\u8F7D\u5931\u8D25",t.classList.add("text-danger");return}u.src=t.options.localImages()},u.setSrc=function(){var o="",e;c=0,t.text.classList.remove("text-danger"),r(t.options.setSrc)&&(o=t.options.setSrc()),o&&o!==""||(o="https://picsum.photos/"+t.options.width+"/"+t.options.height+"/?image="+Math.round(Math.random()*200)),s?(e=new XMLHttpRequest,e.onloadend=function(d){var h=new FileReader;h.readAsDataURL(d.target.response),h.onloadend=function(m){u.src=m.target.result}},e.open("GET",o),e.responseType="blob",e.send()):u.src=o},u.setSrc(),this.text.setAttribute("data-text",this.options.barText),this.text.textContent=this.options.loadingText,this.img=u},v.clean=function(){this.canvasCtx.clearRect(0,0,this.options.width,this.options.height),this.blockCtx.clearRect(0,0,this.options.width,this.options.height),this.block.width=this.options.width},v.bindEvents=function(){var t=this;this.$element.addEventListener("selectstart",function(){return!1}),this.refreshIcon.addEventListener("click",function(){t.text.textContent=t.options.barText,t.reset(),r(t.options.onRefresh)&&t.options.onRefresh.call(t.$element)});var s,n,i=[],a=!1,u=function(e){t.text.classList.contains("text-danger")||(s=e.clientX||e.touches[0].clientX,n=e.clientY||e.touches[0].clientY,a=!0)},c=function(e){var d;if(!a)return!1;var h=e.clientX||e.touches[0].clientX,m=e.clientY||e.touches[0].clientY,p=h-s,x=m-n;if(p<0||p+40>t.options.width)return!1;t.slider.style.left=p-1+"px",d=(t.options.width-60)/(t.options.width-40)*p,t.block.style.left=d+"px",t.sliderContainer.classList.add("sliderContainer_active"),t.sliderMask.style.width=p+4+"px",i.push(Math.round(x))},o=function(e){var d,h;if(!a||(a=!1,d=e.clientX||e.changedTouches[0].clientX,d===s))return!1;t.sliderContainer.classList.remove("sliderContainer_active"),t.trail=i,h=t.verify(),h.spliced&&h.verified?(t.sliderContainer.classList.add("sliderContainer_success"),r(t.options.onSuccess)&&t.options.onSuccess.call(t.$element,i)):(t.sliderContainer.classList.add("sliderContainer_fail"),r(t.options.onFail)&&t.options.onFail.call(t.$element),setTimeout(function(){t.text.innerHTML=t.options.failedText,t.reset()},1e3))};this.slider.addEventListener("mousedown",u),this.slider.addEventListener("touchstart",u),document.addEventListener("mousemove",c),document.addEventListener("touchmove",c),document.addEventListener("mouseup",o),document.addEventListener("touchend",o),document.addEventListener("mousedown",function(){return!1}),document.addEventListener("touchstart",function(){return!1}),document.addEventListener("swipe",function(){return!1})},v.verify=function(){var t=this.trail,s=parseInt(this.block.style.left),n=!1;if(this.options.remoteUrl!==null)n=this.options.verify(t,this.options.remoteUrl);else{var i=function(e,d){return e+d},a=function(e){return e*e},u=t.reduce(i)/t.length,c=t.map(function(e){return e-u}),o=Math.sqrt(c.map(a).reduce(i)/t.length);n=o!==0}return{spliced:Math.abs(s-this.x)<this.options.offset,verified:n}},v.reset=function(){this.sliderContainer.classList.remove("sliderContainer_fail"),this.sliderContainer.classList.remove("sliderContainer_success"),this.slider.style.left=0,this.block.style.left=0,this.sliderMask.style.width=0,this.clean(),this.text.setAttribute("data-text",this.text.textContent),this.text.textContent=this.options.loadingText,this.img.setSrc()}})();const et={class:"fixed top-[20%] left-[50%] translate-x-[-50%] w-[340px] h-[270px] text-sm bg-white dark:bg-zinc-800 rounded border border-zinc-200 dark:border-zinc-900 shadow-3xl"},nt={class:"flex items-center h-5 text-left px-1 mb-1"},ot=w("span",{class:"flex-grow dark:text-zinc-200"},"\u8BF7\u5B8C\u6210\u5B89\u5168\u9A8C\u8BC1",-1),st=w("div",{id:"captcha"},null,-1),O="close",A="success",it={__name:"slider-captcha",emits:[O,A],setup(g,{emit:l}){let r=null;J(()=>{r=sliderCaptcha({id:"captcha",async onSuccess(t){await q({behavior:t})&&l(A)},onFail(){console.log("onFail")},verify(){return!0}})});const f=()=>{r.reset()},v=()=>{l(O)};return(t,s)=>{const n=V("m-svg-icon");return L(),F("div",et,[w("div",nt,[ot,b(n,{name:"refresh",fillClass:"fill-zinc-900 dark:fill-zinc-200",class:"w-3 h-3 p-0.5 rounded-sm duration-300 cursor-pointer hover:bg-zinc-200 dark:hover:bg-zinc-900",onClick:f}),b(n,{name:"close",fillClass:"fill-zinc-900 dark:fill-zinc-200",class:"ml-2 w-3 h-3 p-0.5 rounded-sm duration-300 cursor-pointer hover:bg-zinc-200 dark:hover:bg-zinc-900",onClick:v})]),st])}}},rt={class:"relative h-screen bg-white dark:bg-zinc-800 text-center xl:bg-zinc-200"},at={class:"block px-3 mt-4 dark:bg-zinc-800 xl:bg-white xl:w-[388px] xl:dark:bg-zinc-900 xl:m-auto xl:mt-8 xl:py-4 xl:rounded-sm xl:shadow-lg"},lt=w("h3",{class:"mb-2 font-semibold text-base text-main dark:text-zinc-300 hidden xl:block"}," \u8D26\u53F7\u767B\u5F55 ",-1),ct={name:"login"},ft=Object.assign(ct,{setup(g){const l=W(),r=K(),f=_(!1),v=()=>{f.value=!0},t=async()=>{f.value=!1,i()},s=_(!1),n=_({username:"",password:""}),i=async()=>{s.value=!0;try{await l.dispatch("user/login",S(E({},n.value),{loginType:G}))}finally{s.value=!1}r.push("/")},a=()=>{l.commit("app/changeRouterType","push"),r.push("/register")};return(u,c)=>{const o=V("m-button");return L(),F("div",rt,[b(X),w("div",at,[lt,b(C(B),{onSubmit:v},{default:R(()=>[b(C(I),{class:"dark:bg-zinc-800 dark:text-zinc-400 border-b-zinc-400 border-b-[1px] w-full outline-0 pb-1 px-1 text-base focus:border-b-main dark:focus:border-b-zinc-200 xl:dark:bg-zinc-900",name:"username",rules:C(Y),type:"text",placeholder:"\u7528\u6237\u540D",autocomplete:"on",modelValue:n.value.username,"onUpdate:modelValue":c[0]||(c[0]=e=>n.value.username=e)},null,8,["rules","modelValue"]),b(C(M),{class:"text-sm text-red-600 block mt-0.5 text-left",name:"username"}),b(C(I),{class:"dark:bg-zinc-800 dark:text-zinc-400 border-b-zinc-400 border-b-[1px] w-full outline-0 pb-1 px-1 text-base focus:border-b-main dark:focus:border-b-zinc-200 xl:dark:bg-zinc-900",name:"password",rules:C(H),type:"password",placeholder:"\u5BC6\u7801",autocomplete:"on",modelValue:n.value.password,"onUpdate:modelValue":c[1]||(c[1]=e=>n.value.password=e)},null,8,["rules","modelValue"]),b(C(M),{class:"text-sm text-red-600 block mt-0.5 text-left",name:"password"}),w("div",{class:"pt-1 pb-3 leading-[0px] text-right"},[w("a",{class:"inline-block p-1 text-zinc-400 text-right dark:text-zinc-600 hover:text-zinc-600 dark:hover:text-zinc-400 text-sm duration-400 cursor-pointer",onClick:a}," \u53BB\u6CE8\u518C ")]),b(o,{class:"w-full dark:bg-zinc-900 xl:dark:bg-zinc-800",loading:s.value,isActiveAnim:!1},{default:R(()=>[tt(" \u767B\u5F55 ")]),_:1},8,["loading"])]),_:1})]),f.value?(L(),Q(it,{key:0,onClose:c[2]||(c[2]=e=>f.value=!1),onSuccess:t})):Z("",!0)])}}});export{ft as default};
